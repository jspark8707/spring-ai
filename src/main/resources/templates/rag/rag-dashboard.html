<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <!-- íŒŒë¹„ì½˜ -->
    <link rel="icon" type="image/png" href="/images/NRFëŠ˜í”„_ì˜ë¬¸_ì •ìì„¸.png">
    <link rel="apple-touch-icon" href="/images/NRFëŠ˜í”„_ì˜ë¬¸_ì •ìì„¸.png">

    <!-- ì¹´ì¹´ì˜¤í†¡ ë¯¸ë¦¬ë³´ê¸° (Open Graph) -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="NRF AI Chat">
    <meta property="og:description" content="NRF AI ì±—ë´‡ê³¼ ëŒ€í™”í•´ë³´ì„¸ìš”! GPT-4o Miniì™€ Llama 3ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.">
    <meta property="og:image" content="/images/NRFëŠ˜í”„_ì˜ë¬¸_ì •ìì„¸.png">
    <meta property="og:url" content="">
    <meta property="og:site_name" content="NRF AI Chat">

    <!-- íŠ¸ìœ„í„° ì¹´ë“œ -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="NRF AI Chat">
    <meta name="twitter:description" content="NRF AI ì±—ë´‡ê³¼ ëŒ€í™”í•´ë³´ì„¸ìš”!">
    <meta name="twitter:image" content="/images/NRFëŠ˜í”„_ì˜ë¬¸_ì •ìì„¸.png">
    <title>Spring AI RAG Assistant</title>
    <link rel="stylesheet" th:href="@{/css/rag-modern.css}">
    <style>
        /* âœ… grid ê¸°ë°˜ 3ë‹¨ ë ˆì´ì•„ì›ƒ ê°•ì œ ì ìš© */
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #f9fafb;
            font-family: "Pretendard", "Noto Sans KR", sans-serif;
        }

        .main-layout {
            display: grid !important;
            grid-template-columns: 260px 1fr 340px;
            grid-template-areas: "sidebar chat context";
            height: calc(100vh - 60px);
            overflow: hidden;
        }

        .sidebar { grid-area: sidebar; }
        .chat-container { grid-area: chat; }
        .context-panel { grid-area: context; }

        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 260px 1fr;
                grid-template-areas: "sidebar chat";
            }
            .context-panel { display: none; }
        }

        @media (max-width: 768px) {
            .main-layout {
                grid-template-columns: 1fr;
                grid-template-areas: "chat";
            }
            .sidebar, .context-panel { display: none; }
        }
    </style>
</head>
<body>

<!-- í—¤ë” -->
<header class="top-header">
    <div class="logo">
        <img src="/images/NRFëŠ˜í”„_ì˜ë¬¸_ì •ìì„¸.png" alt="NRF Logo" class="logo-icon">
        NRF AIê¸°ë°˜ RAG Assistant
    </div>
</header>


<!-- âœ… 3ë‹¨ êµ¬ì„± -->
<div class="main-layout">

    <!-- ì¢Œì¸¡ PDF ê´€ë¦¬ -->
    <aside class="sidebar">
        <h3>ğŸ“‚ PDF ë¬¸ì„œ ê´€ë¦¬</h3>

        <form id="upload-form" th:action="@{/rag/upload}" method="post" enctype="multipart/form-data">
            <label class="upload-box" id="drop-area">
                <span id="upload-label">í´ë¦­í•˜ê±°ë‚˜ PDFë¥¼ ëŒì–´ë‹¤ ë†“ìœ¼ì„¸ìš”</span>
                <input type="file" name="file" id="file-input" accept="application/pdf" hidden>
            </label>

            <div class="progress">
                <div id="progress-bar"></div>
            </div>

            <p id="upload-status"></p>

            <div class="upload-buttons">
                <button type="submit" class="btn-primary">PDF ì—…ë¡œë“œ(ë²¡í„°DB)</button>
            </div>
        </form>

        <div id="file-list" class="file-list">
            <p></p>
        </div>
    </aside>

    <!-- ì¤‘ì•™ ì±„íŒ… ì˜ì—­ -->
    <main class="chat-container">
        <div id="chat-area" class="chat-area">
            <div class="ai-bubble intro">
                ğŸ¤– ì•ˆë…•í•˜ì„¸ìš”! PDF ë¬¸ì„œì—ì„œ í•„ìš”í•œ ë‚´ìš©ì„ ì°¾ì•„ë“œë¦´ê²Œìš”.<br>
                ì¢Œì¸¡ ë©”ë‰´ì—ì„œ PDFë¥¼ ì—…ë¡œë“œí•œ ë’¤ ì§ˆë¬¸ì„ ì…ë ¥í•˜ë©´ <b>RAG ê¸°ë°˜ìœ¼ë¡œ</b> ì •í™•í•œ ë‹µë³€ì„ ì œê³µí•©ë‹ˆë‹¤.<br>
            </div>
        </div>

        <form id="query-form" class="chat-input" th:action="@{/rag/query}" method="post">
            <input type="text" name="question" placeholder="ë¬´ì—‡ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?" autocomplete="off" required>
            <button type="submit">ë³´ë‚´ê¸°</button>
        </form>
    </main>

    <!-- ìš°ì¸¡ ì°¸ê³  ë¬¸ì„œ -->
    <aside class="context-panel" id="context-panel">
        <div class="resize-handle" id="resize-handle"></div>
        <h3>ğŸ” ì°¸ê³  ë¬¸ì„œ</h3>
        <div id="context-list">
            <p>AIê°€ ì¸ìš©í•œ ë¬¸ì„œ ê·¼ê±°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
        </div>
    </aside>

</div> <!-- /main-layout -->

<script th:src="@{/js/rag.js}"></script>
</body>
</html>
